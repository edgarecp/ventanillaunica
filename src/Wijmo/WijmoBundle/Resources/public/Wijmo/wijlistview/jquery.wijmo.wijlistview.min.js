var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijlistview",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._baseWidget=function(){return n.mobile.listview},t}(e.wijmoWidget);t.wijlistview=i,n.mobile&&(i.prototype.options=n.extend({},n.mobile.listview.prototype.options,e.wijmoWidget.prototype.options,{initSelector:":jqmData(role='wijlistview')"}),n.wijmo.registerWidget(r,n.mobile.listview,i.prototype));if(n.mobile&&n.mobile.document){i.prototype.options.filter=!1,i.prototype.options.filterPlaceholder="Filter items...",i.prototype.options.filterTheme="c",i.prototype.options.filterReveal=!1;var s=function(e,t,n){return e.toString().toLowerCase().indexOf(t)===-1};i.prototype.options.filterCallback=s,n.mobile.document.delegate("ul, ol","wijlistviewcreate",function(){var e=n(this),t=e.data("wijmoWijlistview");if(!t||!t.options.filter)return;t.options.filterReveal&&e.children().addClass("ui-screen-hidden");var r=n("<form>",{"class":"ui-listview-filter ui-bar-"+t.options.filterTheme,role:"search"}).submit(function(e){e.preventDefault(),o.blur()}),i=function(r){var i=n(this),o=this.value.toLowerCase(),u=null,a=e.children(),f=i.jqmData("lastval")+"",l=!1,c="",h,p=t.options.filterCallback!==s;if(f&&f===o)return;t._trigger("beforefilter","beforefilter",{input:this}),i.jqmData("lastval",o),p||o.length<f.length||o.indexOf(f)!==0?u=e.children():(u=e.children(":not(.ui-screen-hidden)"),!u.length&&t.options.filterReveal&&(u=e.children(".ui-screen-hidden")));if(o){for(var d=u.length-1;d>=0;d--)h=n(u[d]),c=h.jqmData("filtertext")||h.text(),h.is("li:jqmData(role=list-divider)")?(h.toggleClass("ui-filter-hidequeue",!l),l=!1):t.options.filterCallback(c,o,h)?h.toggleClass("ui-filter-hidequeue",!0):l=!0;u.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden",!1),u.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden",!0).toggleClass("ui-filter-hidequeue",!1)}else u.toggleClass("ui-screen-hidden",!!t.options.filterReveal);t._addFirstLastClasses(a,t._getVisibles(a,!1),!1)},o=n("<input>",{placeholder:t.options.filterPlaceholder}).attr("data-"+n.mobile.ns+"type","search").jqmData("lastval","").bind("keyup change input",i).appendTo(r).textinput();t.options.inset&&r.addClass("ui-listview-filter-inset"),r.bind("submit",function(){return!1}).insertBefore(e)}),i.prototype.options.autodividers=!1,i.prototype.options.autodividersSelector=function(e){var t=n.trim(e.text())||null;return t?(t=t.slice(0,1).toUpperCase(),t):null},n.mobile.document.delegate("ul,ol","wijlistviewcreate",function(){var e=n(this),t=e.data("wijmoWijlistview");if(!t||!t.options.autodividers)return;var r=function(){e.find("li:jqmData(role='list-divider')").remove();var r=e.find("li"),i=null,s,o;for(var u=0;u<r.length;u++){s=r[u],o=t.options.autodividersSelector(n(s));if(o&&i!==o){var a=document.createElement("li");a.appendChild(document.createTextNode(o)),a.setAttribute("data-"+n.mobile.ns+"role","list-divider"),s.parentNode.insertBefore(a,s)}i=o}},i=function(){e.unbind("listviewafterrefresh",i),r(),t.refresh(),e.bind("listviewafterrefresh",i)};i()})}})(e.listview||(e.listview={}));var t=e.listview})(wijmo||(wijmo={}));